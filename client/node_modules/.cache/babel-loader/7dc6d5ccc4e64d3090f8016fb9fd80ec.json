{"ast":null,"code":"var _jsxFileName = \"/home/rhaissa/Documents/Documents/Learning how to code/1. EvolveU/1. Projects/EvolveU_Project_2/evolveu-c6-project-02/client/src/Pages/EditListingsPage.js\";\nimport React, { useState, useContext } from 'react';\nimport { useParams, useHistory } from 'react-router-dom';\nimport { AuthContext } from '../Shared/components/context/auth-context';\nimport UseFormNewListing from '../components/ListingForm/UseFormNewListing';\nimport ListingsByUserId from './ListingsByUserId';\nimport Card from '../Shared/components/UIElements/Card'; // import './NewListing.css';\n\nconst EditListing = () => {\n  const auth = useContext(AuthContext);\n  const [saveError, setSaveError] = useState();\n  const userId = useParams();\n  console.log(userId);\n  const userIdString = userId.id;\n  const listingsIdString = userId.listings;\n  const history = useHistory();\n\n  const onSave = async newListing => {\n    try {\n      const response = await fetch('/api/listings/:lid', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(newListing)\n      });\n      console.log('Edit response is', response);\n\n      if (response.status === 500) {\n        let errorMessage = await response.text();\n        console.log('We had an error.  it was: ', errorMessage);\n        setSaveError(errorMessage);\n      } else {\n        setSaveError(undefined);\n        history.push(`/user_profile/${userIdString}`);\n      }\n    } catch (error) {\n      console.error('Fetch failed to reach the server.');\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ListingsByUserId, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(UseFormNewListing, {\n    onSave: onSave,\n    saveError: saveError,\n    saveButtonCaption: \"Edit Listing\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  })));\n};\n\nexport default EditListing;","map":{"version":3,"sources":["/home/rhaissa/Documents/Documents/Learning how to code/1. EvolveU/1. Projects/EvolveU_Project_2/evolveu-c6-project-02/client/src/Pages/EditListingsPage.js"],"names":["React","useState","useContext","useParams","useHistory","AuthContext","UseFormNewListing","ListingsByUserId","Card","EditListing","auth","saveError","setSaveError","userId","console","log","userIdString","id","listingsIdString","listings","history","onSave","newListing","response","fetch","method","headers","body","JSON","stringify","status","errorMessage","text","undefined","push","error"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,UAA1B,QAA4C,OAA5C;AACA,SAASC,SAAT,EAAoBC,UAApB,QAAsC,kBAAtC;AACA,SAAQC,WAAR,QAA0B,2CAA1B;AACA,OAAOC,iBAAP,MAA8B,6CAA9B;AACA,OAAOC,gBAAP,MAA6B,oBAA7B;AACA,OAAOC,IAAP,MAAiB,sCAAjB,C,CAEA;;AAEA,MAAMC,WAAW,GAAG,MAAM;AAEtB,QAAMC,IAAI,GAAGR,UAAU,CAACG,WAAD,CAAvB;AAEA,QAAM,CAACM,SAAD,EAAYC,YAAZ,IAA4BX,QAAQ,EAA1C;AAEA,QAAMY,MAAM,GAAGV,SAAS,EAAxB;AAEFW,EAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;AAEE,QAAMG,YAAY,GAAGH,MAAM,CAACI,EAA5B;AAEA,QAAMC,gBAAgB,GAAGL,MAAM,CAACM,QAAhC;AAEA,QAAMC,OAAO,GAAGhB,UAAU,EAA1B;;AAEA,QAAMiB,MAAM,GAAG,MAAOC,UAAP,IAAsB;AACnC,QAAG;AACD,YAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,oBAAD,EAAuB;AAC/CC,QAAAA,MAAM,EAAE,MADuC;AAE/CC,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT,SAFsC;AAK/CC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeP,UAAf;AALyC,OAAvB,CAA5B;AAQAR,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCQ,QAAhC;;AACM,UAAIA,QAAQ,CAACO,MAAT,KAAoB,GAAxB,EAA6B;AACzB,YAAIC,YAAY,GAAG,MAAMR,QAAQ,CAACS,IAAT,EAAzB;AACAlB,QAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ,EAA0CgB,YAA1C;AACAnB,QAAAA,YAAY,CAACmB,YAAD,CAAZ;AACH,OAJD,MAKK;AACDnB,QAAAA,YAAY,CAACqB,SAAD,CAAZ;AACAb,QAAAA,OAAO,CAACc,IAAR,CAAc,iBAAgBlB,YAAa,EAA3C;AAEP;AACF,KApBH,CAoBI,OAAOmB,KAAP,EAAc;AACVrB,MAAAA,OAAO,CAACqB,KAAR,CAAc,mCAAd;AACH;AACN,GAxBD;;AA0BA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA,oBAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,eAEA,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA,oBAAC,iBAAD;AACI,IAAA,MAAM,EAAEd,MADZ;AAEI,IAAA,SAAS,EAAEV,SAFf;AAGI,IAAA,iBAAiB,EAAC,cAHtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,CAFA,CADF;AAaH,CAvDD;;AAwDA,eAAeF,WAAf","sourcesContent":["import React, { useState, useContext } from 'react';\nimport { useParams, useHistory } from 'react-router-dom';\nimport {AuthContext} from '../Shared/components/context/auth-context'\nimport UseFormNewListing from '../components/ListingForm/UseFormNewListing';\nimport ListingsByUserId from './ListingsByUserId';\nimport Card from '../Shared/components/UIElements/Card';\n\n// import './NewListing.css';\n\nconst EditListing = () => {\n\n    const auth = useContext(AuthContext);\n\n    const [saveError, setSaveError] = useState()\n  \n    const userId = useParams();\n\n  console.log(userId)\n\n    const userIdString = userId.id;\n\n    const listingsIdString = userId.listings\n    \n    const history = useHistory()\n    \n    const onSave = async (newListing) => {\n      try{\n        const response = await fetch('/api/listings/:lid', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n          },\n            body: JSON.stringify(newListing)\n        })\n  \n        console.log('Edit response is', response)\n              if (response.status === 500) {\n                  let errorMessage = await response.text()\n                  console.log('We had an error.  it was: ', errorMessage)\n                  setSaveError(errorMessage)\n              }\n              else {\n                  setSaveError(undefined)\n                  history.push(`/user_profile/${userIdString}`)\n              \n          }\n        } catch (error) {\n              console.error('Fetch failed to reach the server.')\n          }\n    }\n  \n    return (\n      <div>\n      <ListingsByUserId />\n      <Card>\n      <UseFormNewListing \n          onSave={onSave} \n          saveError={saveError} \n          saveButtonCaption=\"Edit Listing\"\n      />\n      </Card>\n      </div>\n  )\n\n}\nexport default EditListing;"]},"metadata":{},"sourceType":"module"}